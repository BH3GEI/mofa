const w={en:{flag:"🇺🇸",name:"EN",title:"MoFA - Make Ordinary Developers Full-stack AI Engineers"},zh:{flag:"🇨🇳",name:"中文",title:"MoFA - 让普通开发者成为全栈 AI 工程师"}};let I="en";function p(e){I=e,document.getElementById("page-title").textContent=w[e].title,document.getElementById("html-root").setAttribute("lang",e==="zh"?"zh-CN":"en");const n=document.getElementById("current-lang"),o=e==="en"?"zh":"en";n.textContent=`${w[o].flag} ${w[o].name}`,document.querySelectorAll("[data-en][data-zh]").forEach(r=>{const c=r.getAttribute(`data-${e}`);c&&(r.innerHTML=c)}),localStorage.setItem("mofa-language",e)}function A(){const e=localStorage.getItem("mofa-language");e&&w[e]?p(e):p("en")}document.getElementById("lang-toggle").addEventListener("click",()=>{p(I==="en"?"zh":"en")});document.addEventListener("DOMContentLoaded",A);let s="arxiv",l=0,y=!1,v,B;const E={"hello-world":{steps:2,connections:[{from:1,to:2},{from:2,to:1}]},"browser-use":{steps:2,connections:[{from:1,to:2}]},"deep-research":{steps:2,connections:[{from:1,to:2},{from:2,to:1}]},firecrawl:{steps:3,connections:[{from:1,to:2},{from:2,to:3}]},weather:{steps:4,connections:[{from:1,to:2},{from:2,to:3},{from:3,to:4}]},arxiv:{steps:8,connections:[{from:1,to:2},{from:2,to:3},{from:3,to:4},{from:4,to:5},{from:5,to:6},{from:6,to:7},{from:7,to:8},{from:7,to:5}]}};function M(){try{const e=document.querySelectorAll(".demo-tab");console.log("Found demo tabs:",e.length),e.forEach(t=>{t.addEventListener("click",()=>{console.log("Demo tab clicked:",t.dataset.demo),i(t.dataset.demo)})});const n=document.querySelector(".carousel-arrow-left"),o=document.querySelector(".carousel-arrow-right");n&&o&&(n.addEventListener("click",()=>{const t=["hello-world","browser-use","deep-research","firecrawl","weather","arxiv"],c=(t.indexOf(s)-1+t.length)%t.length;i(t[c])}),o.addEventListener("click",()=>{const t=["hello-world","browser-use","deep-research","firecrawl","weather","arxiv"],c=(t.indexOf(s)+1)%t.length;i(t[c])})),console.log("Initializing with hello-world demo"),i("hello-world"),q(),B=setInterval(()=>{const t=["hello-world","browser-use","deep-research","firecrawl","weather","arxiv"],c=(t.indexOf(s)+1)%t.length;i(t[c])},6e4),console.log("Flow visualization initialized successfully")}catch(e){console.error("Error initializing flow visualization:",e)}}function i(e){try{if(console.log("Switching to demo:",e),e===s)return;z();const n=document.querySelectorAll(".demo-content");console.log("Found demo contents:",n.length),n.forEach(r=>{r.style.display="none",r.classList.remove("active")});const o=document.getElementById(`${e}-demo`);if(console.log("Target demo element:",o),o)o.style.display="block",o.classList.add("active");else{console.error("Target demo not found:",`${e}-demo`);return}document.querySelectorAll(".demo-tab").forEach(r=>{r.dataset.demo===e?r.classList.add("active"):r.classList.remove("active")}),s=e,l=0,setTimeout(()=>{try{b(),$(),q(),console.log("Demo switched successfully to:",e)}catch(r){console.error("Error in demo switch timeout:",r)}},100)}catch(n){console.error("Error switching demo:",n)}}function b(){const e=document.querySelector(".demo-content.active");if(!e)return;const n=e.querySelector(".flow-connections");if(!n)return;n.innerHTML="";const o=E[s];o&&o.connections.forEach((t,r)=>{const c=e.querySelector(`[data-step="${t.from}"] .agent-card`),a=e.querySelector(`[data-step="${t.to}"] .agent-card`);if(c&&a){const d=c.getBoundingClientRect(),u=a.getBoundingClientRect(),m=e.querySelector(".flow-container").getBoundingClientRect(),f=d.left-m.left+d.width/2,L=d.top-m.top+d.height/2,g=u.left-m.left+u.width/2,S=u.top-m.top+u.height/2,h=document.createElementNS("http://www.w3.org/2000/svg","path"),D=f+(g-f)*.5,C=L,F=g-(g-f)*.5,k=`M ${f} ${L} C ${D} ${C}, ${F} ${S}, ${g} ${S}`;h.setAttribute("d",k),h.setAttribute("class","flow-path"),h.setAttribute("data-connection",r),n.appendChild(h)}})}function q(){if(y)return;y=!0,l=0;const e=E[s];e&&(v=setInterval(()=>{l<e.steps?(T(l+1),l++):setTimeout(()=>{$(),l=0},2e3)},1500))}function z(){y=!1,v&&(clearInterval(v),v=null)}function T(e){const n=document.querySelector(".demo-content.active");if(!n)return;const o=n.querySelector(`[data-step="${e}"] .agent-card`);o&&(o.classList.remove("pending","completed"),o.classList.add("active","processing"),o.style.transform="scale(1)",o.style.opacity="1",o.style.boxShadow="0 10px 30px rgba(99, 102, 241, 0.3)",setTimeout(()=>{o.classList.remove("active","processing"),o.classList.add("completed"),o.style.boxShadow="none"},1200));const t=E[s];t&&t.connections.forEach((r,c)=>{r.from===e&&setTimeout(()=>{const a=n.querySelector(`[data-connection="${c}"]`);a&&a.classList.add("active")},600)})}function $(){z(),l=0;const e=document.querySelector(".demo-content.active");if(!e)return;e.querySelectorAll(".interactive-agent").forEach(t=>{t.classList.remove("active","completed","processing"),t.classList.add("pending"),t.style.transform="scale(0.95)",t.style.opacity="0.7",t.style.boxShadow="none"}),e.querySelectorAll(".flow-path").forEach(t=>{t.classList.remove("active")})}window.addEventListener("resize",()=>{setTimeout(b,100)});function x(){try{console.log("Page initialization started"),A(),setTimeout(()=>{console.log("Starting flow visualization initialization"),M()},100)}catch(e){console.error("Error during page initialization:",e)}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",x):x();
