const p={en:{flag:"🇺🇸",name:"EN",title:"MoFA - Make Ordinary Developers Full-stack AI Engineers"},zh:{flag:"🇨🇳",name:"中文",title:"MoFA - 让普通开发者成为全栈 AI 工程师"}};let S="en";function v(e){S=e,document.getElementById("page-title").textContent=p[e].title,document.getElementById("html-root").setAttribute("lang",e==="zh"?"zh-CN":"en");const c=document.getElementById("current-lang"),o=e==="en"?"zh":"en";c.textContent=`${p[o].flag} ${p[o].name}`,document.querySelectorAll("[data-en][data-zh]").forEach(n=>{const r=n.getAttribute(`data-${e}`);r&&(n.innerHTML=r)}),localStorage.setItem("mofa-language",e)}function I(){const e=localStorage.getItem("mofa-language");e&&p[e]?v(e):v("en")}document.getElementById("lang-toggle").addEventListener("click",()=>{v(S==="en"?"zh":"en")});document.addEventListener("DOMContentLoaded",I);let s="arxiv",a=0,y=!1,w;const L={"hello-world":{steps:2,connections:[{from:1,to:2},{from:2,to:1}]},"browser-use":{steps:2,connections:[{from:1,to:2}]},"deep-research":{steps:2,connections:[{from:1,to:2},{from:2,to:1}]},firecrawl:{steps:3,connections:[{from:1,to:2},{from:2,to:3}]},weather:{steps:4,connections:[{from:1,to:2},{from:2,to:3},{from:3,to:4}]},arxiv:{steps:8,connections:[{from:1,to:2},{from:2,to:3},{from:3,to:4},{from:4,to:5},{from:5,to:6},{from:6,to:7},{from:7,to:8},{from:7,to:5}]}};function B(){document.querySelectorAll(".demo-tab").forEach(t=>{t.addEventListener("click",()=>i(t.dataset.demo))});const c=document.querySelector(".carousel-arrow-left"),o=document.querySelector(".carousel-arrow-right");c.addEventListener("click",()=>{const t=["hello-world","browser-use","deep-research","firecrawl","weather","arxiv"],r=(t.indexOf(s)-1+t.length)%t.length;i(t[r])}),o.addEventListener("click",()=>{const t=["hello-world","browser-use","deep-research","firecrawl","weather","arxiv"],r=(t.indexOf(s)+1)%t.length;i(t[r])}),i("hello-world"),b(),setInterval(()=>{const t=["hello-world","browser-use","deep-research","firecrawl","weather","arxiv"],r=(t.indexOf(s)+1)%t.length;i(t[r])},6e4)}function i(e){if(e===s)return;q(),document.querySelectorAll(".demo-content").forEach(n=>{n.style.display="none",n.classList.remove("active")});const o=document.getElementById(`${e}-demo`);o&&(o.style.display="block",o.classList.add("active")),document.querySelectorAll(".demo-tab").forEach(n=>{n.dataset.demo===e?n.classList.add("active"):n.classList.remove("active")}),s=e,a=0,setTimeout(()=>{A(),$(),b()},100)}function A(){const e=document.querySelector(".demo-content.active");if(!e)return;const c=e.querySelector(".flow-connections");if(!c)return;c.innerHTML="";const o=L[s];o&&o.connections.forEach((t,n)=>{const r=e.querySelector(`[data-step="${t.from}"] .agent-card`),l=e.querySelector(`[data-step="${t.to}"] .agent-card`);if(r&&l){const d=r.getBoundingClientRect(),m=l.getBoundingClientRect(),u=e.querySelector(".flow-container").getBoundingClientRect(),f=d.left-u.left+d.width/2,x=d.top-u.top+d.height/2,g=m.left-u.left+m.width/2,E=m.top-u.top+m.height/2,h=document.createElementNS("http://www.w3.org/2000/svg","path"),C=f+(g-f)*.5,D=x,T=g-(g-f)*.5,z=`M ${f} ${x} C ${C} ${D}, ${T} ${E}, ${g} ${E}`;h.setAttribute("d",z),h.setAttribute("class","flow-path"),h.setAttribute("data-connection",n),c.appendChild(h)}})}function b(){if(y)return;y=!0,a=0;const e=L[s];e&&(w=setInterval(()=>{a<e.steps?(M(a+1),a++):setTimeout(()=>{$(),a=0},2e3)},1500))}function q(){y=!1,w&&(clearInterval(w),w=null)}function M(e){const c=document.querySelector(".demo-content.active");if(!c)return;const o=c.querySelector(`[data-step="${e}"] .agent-card`);o&&(o.classList.remove("pending","completed"),o.classList.add("active","processing"),o.style.transform="scale(1)",o.style.opacity="1",o.style.boxShadow="0 10px 30px rgba(99, 102, 241, 0.3)",setTimeout(()=>{o.classList.remove("active","processing"),o.classList.add("completed"),o.style.boxShadow="none"},1200));const t=L[s];t&&t.connections.forEach((n,r)=>{n.from===e&&setTimeout(()=>{const l=c.querySelector(`[data-connection="${r}"]`);l&&l.classList.add("active")},600)})}function $(){q(),a=0;const e=document.querySelector(".demo-content.active");if(!e)return;e.querySelectorAll(".interactive-agent").forEach(t=>{t.classList.remove("active","completed","processing"),t.classList.add("pending"),t.style.transform="scale(0.95)",t.style.opacity="0.7",t.style.boxShadow="none"}),e.querySelectorAll(".flow-path").forEach(t=>{t.classList.remove("active")})}window.addEventListener("resize",()=>{setTimeout(A,100)});document.addEventListener("DOMContentLoaded",()=>{I(),setTimeout(B,100)});
